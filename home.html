<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GANESH</title>
  <link rel="stylesheet" href="home.css">
</head>
<body>

<script>
  // âœ… Check login state
  const urlParams = new URLSearchParams(window.location.search);
  const user = urlParams.get("user");
  const loggedIn = localStorage.getItem("loggedIn");

  if (loggedIn !== "true" || !user) {
    window.location.href = "index.html"; // Redirect if not logged in
  }

  // âœ… Prevent back button after logout
  window.history.pushState(null, null, window.location.href);
  window.onpopstate = function () {
    window.history.go(1);
  };

  // âœ… Logout function
  function logout() {
    localStorage.removeItem("loggedIn");
    localStorage.removeItem("userEmail");
    window.location.href = "index.html";
  }
</script>

<!-- âœ… Navbar -->
<div class="nav-container">
  <img class="logo" id="logo" src="IMG_20250705_162604966_PORTRAIT.jpg" alt="User Logo">

  <div class="nav-links">
    <a href="home.html">Home</a>
    <a href="#services">Services</a>
    <a href="feedback.html">Feedback</a>
    <a href="register.html">Register</a>
    <a href="javascript:void(0)" onclick="logout()">Logout</a>
  </div>
</div>

<!-- âœ… Home Section -->
<div class="home">
  <div class="home-left">
    <h1 class="head">Welcome, <span id="userName"></span> ðŸŽ‰</h1>
    <p class="name">K.BALA GANESH MANIKANTA</p>
    Visakhapatnam(dst.)<br>
    AndhraPradesh.Pin:531173 <br>
    Email: <span id="userEmail"></span> <br>
    Call: 9849817764
  </div>

  <div class="home-right">
    <img class="logo2" id="logo2" src="IMG_1666.jpg" alt="Profile Logo">
  </div>
</div>

<!-- âœ… Services -->
<div class="services" id="services">
  <h1 class="sh">Services we offer</h1>
  <div class="sub-services">
    <a href="https://ganesh20010407.github.io/student-login/" class="service" target="_blank">
      <h2>Web Designing</h2>
      <p>I will teach you how to do it.</p>
      <img class="me1" src="https://img.icons8.com/?size=100&id=ejub91zEY6Sl&format=png&color=000000" alt="Web Design Icon">
    </a>

    <a href="https://www.instagram.com/manikanta785?igsh=YnB5enU1bnRlcDV4" class="service" target="_blank">
      <h2>Photography</h2>
      <p>I will teach you how to do it.</p>
      <img class="me1" src="https://img.icons8.com/?size=100&id=MfmzF6BiXHNG&format=png&color=000000" alt="Photography Icon">
    </a>

    <a href="web.html" class="service">
      <h2>Working</h2>
      <p>I will teach you how to do it.</p>
      <img class="me1" src="https://img.icons8.com/?size=100&id=GDFE7o6cZBuY&format=png&color=000000" alt="Working Icon">
    </a>
  </div>
</div>

<!-- âœ… Contact -->
<div class="uses">
  <h1 class="us">Contact us</h1>
  <p class="ph">Ph.no:0123456789</p>
  <p class="mail">mail:soandso@gmail.com</p>
  <a href="https://youtube.com" target="_blank">click here</a>
</div>

<script>
  // âœ… Show logged-in user info
  const savedEmail = localStorage.getItem("userEmail") || user;
  const username = savedEmail ? savedEmail.split("@")[0] : "User";
  document.getElementById("userEmail").textContent = savedEmail;
  document.getElementById("userName").textContent = username.charAt(0).toUpperCase() + username.slice(1);

  // âœ… Logo zoom + overlay animation for both logos
  const logos = [document.getElementById("logo"), document.getElementById("logo2")];

  // Create overlay once
  const overlay = document.createElement("div");
  overlay.classList.add("overlay");
  document.body.appendChild(overlay);

  logos.forEach(lg => {
    lg.addEventListener("click", () => {
      lg.classList.toggle("zoom");
      overlay.classList.toggle("show");

      // Stop idle animation if logo2
      if (lg.id === "logo2") {
        if (lg.classList.contains("zoom")) {
          lg.style.animation = "none";
        } else {
          lg.style.animation = "idleZoom 2s ease-in-out infinite";
        }
      }
    });
  });

  overlay.addEventListener("click", () => {
    logos.forEach(lg => {
      lg.classList.remove("zoom");
      if (lg.id === "logo2") lg.style.animation = "idleZoom 2s ease-in-out infinite";
    });
    overlay.classList.remove("show");
  });
</script>

</body>
</html>
